<!DOCTYPE html>
<html>

<head>
    <title>Angular 2 QuickStart</title>

    <link href="./styles.css" rel="stylesheet" type="text/css">
</head>

<body>
<app>Loading...</app>

<div id="tree"></div>

<script src="../build/common.js"></script>
<script src="../build/vendor.js"></script>
<script src="../build/app.js"></script>
<script>
    ;
    (function () {
        'use strict';
        var tree = {
            value: 'A',
            children: [
                {
                    value: 'B',
                },
                {
                    value: 'C',
                },
                {
                    value: 'D',
                    children: [
                        {
                            value: 'X',
                            children: [
                                {
                                    value: 'X',
                                },
                                {
                                    value: 'Y',
                                }
                            ]
                        },
                        {
                            value: 'Y',
                            children: [
                                {
                                    value: 'X',
                                },
                                {
                                    value: 'Y',
                                    children: [
                                        {
                                            value: 'X',
                                        },
                                        {
                                            value: 'Y',
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    value: 'W'
                }
            ]
        };

        function walkTree2(tree, level) {
            var value = tree.value;
            if (!tree.children) {
                var li = document.createElement('li');
                li.innerHTML = value;
                return li;
            }

            var nodeLi = document.createElement('li');
            var nodeValue = document.createElement('span');
            nodeValue.className = 'node-value';
            nodeValue.innerText = value;

            var nodeFold = document.createElement('span');
            nodeFold.innerText = '[-]';
            nodeFold.className = 'folding';
            nodeFold.addEventListener('click', function() {
                if (nodeFold.innerText === '[-]') {
                    nodeFold.innerText = '[+]';
                    nodeFold.parentNode.querySelector('span + ul').style.display = 'none';
                } else {
                    nodeFold.innerText = '[-]';
                    nodeFold.parentNode.querySelector('span + ul').style.display = 'block';
                }
            });

            var nodeChildren = document.createElement('ul');

            nodeLi.appendChild(nodeValue);
            nodeLi.appendChild(nodeFold);
            nodeLi.appendChild(nodeChildren);

            tree.children.forEach(function (child) {
                nodeChildren.appendChild(walkTree2(child, level + 1));
            });

            return nodeLi;
        }

        console.log(walkTree2(tree, 0));
        var result = document.createElement('ul');
        result.appendChild(walkTree2(tree, 0));
        document.getElementById('tree').appendChild(result);
    }());
</script>
</body>

</html>